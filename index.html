<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JR DENT</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap');
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Montserrat',sans-serif;background:#f6f7fb;color:#111}

    /* TOP BAR */
    .topbar{background:#F5F7FA;padding:10px 0}
    .container{width:min(1100px,92%);margin:0 auto}
    .topbar-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .logo-img{height:80px;width:auto;display:block}

    .search{flex:1;display:flex;gap:8px;max-width:520px;margin:0 12px}
    .search input{width:100%;padding:10px 12px;border-radius:10px;border:none;outline:none;background:#eaf1ff;color:#111}
    .search button{padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:700;background:#1B0561;color:#fff}

    .actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .linkbtn{background:transparent;border:2px solid #1B0561;color:#1B0561;padding:8px 14px;border-radius:10px;cursor:pointer;font-weight:700;transition:.25s}
    .linkbtn:hover{background:#fff;color:#111}

    /* carrito */
    .cart-btn{position:relative;display:flex;align-items:center;justify-content:center;background:transparent;border:2px solid #1B0561;color:#1B0561;width:44px;height:44px;border-radius:12px;cursor:pointer;transition:.25s}
    .cart-btn:hover{background:#fff;color:#111}
    .cart-count{position:absolute;top:-6px;right:-5px;background:red;color:#fff;font-size:12px;font-weight:800;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;border-radius:999px}

    /* PERFIL */
    .userpill{display:flex;align-items:center;gap:10px;padding:8px 12px;border-radius:999px;border:2px solid #1B0561;background:rgba(255,255,255,.12);color:#1B0561;cursor:pointer;font-weight:900;transition:.25s}
    .userpill:hover{background:#fff;color:#111}
    .avatar{width:34px;height:34px;border-radius:999px;display:grid;place-items:center;background:rgba(27,5,97,.12);font-weight:900}
    .username{max-width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

    .hidden{display:none!important}

    /* SUBBAR */
    .subbar{background:#fff;border-bottom:1px solid #e5e7eb;box-shadow:0 8px 18px rgba(0,0,0,.06);padding:4px 0}
    .subbar-inner{width:min(1100px,92%);margin:0 auto;display:flex;align-items:center;gap:10px;padding:2px 0;flex-wrap:nowrap}
    .all-products{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:14px;background:#1B0561;color:#fff;font-weight:900;cursor:pointer;user-select:none;transition:.2s;white-space:nowrap;flex:0 0 auto}
    .all-products:hover{filter:brightness(1.08)}
    .hamburger{width:18px;height:12px;position:relative;display:inline-block}
    .hamburger span{position:absolute;left:0;right:0;height:2px;background:#fff;border-radius:2px}
    .hamburger span:nth-child(1){top:0}
    .hamburger span:nth-child(2){top:5px;opacity:.9}
    .hamburger span:nth-child(3){top:10px;opacity:.85}

    .subbar ul{list-style:none;display:flex;align-items:center;gap:0;margin-left:6px;flex:1;justify-content:center;flex-wrap:nowrap}
    .subbar li+li{border-left:1px solid #e5e7eb}
    .subbar a{color:#1B0561;text-decoration:none;font-weight:800;font-size:15px;padding:12px 14px;display:inline-flex;align-items:center;justify-content:center;transition:.18s}
    .subbar a:hover{color:#2563eb;background:rgba(37,99,235,.06)}

    /* SLIDER HOME */
    .slider{position:relative;width:min(1450px,100%);margin:10px auto;overflow:hidden;border-radius:16px;background:#e5e7eb}
    .slides{position:relative;height:620px}
    .slide{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .6s ease;background:#e5e7eb}
    .slide.active{opacity:1}
    .arrow{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.5);border:none;color:#fff;font-size:24px;padding:10px 12px;cursor:pointer;border-radius:50%;z-index:10}
    .arrow.left{left:15px}
    .arrow.right{right:15px}
    .arrow:hover{background:rgba(0,0,0,.8)}

    main{padding:28px 0}
    .card{background:#fff;border-radius:16px;padding:18px;box-shadow:0 10px 24px rgba(0,0,0,.08)}
    .page{padding:18px 0 40px}

    /* HERO */
    .hero-wide{width:min(1200px,92%);margin:18px auto;border-radius:18px;overflow:hidden;position:relative;background:#e5e7eb;box-shadow:0 10px 26px rgba(0,0,0,.10)}
    .hero-wide img{width:100%;height:260px;object-fit:cover;display:block}
    .hero-overlay{position:absolute;inset:0;background:linear-gradient(90deg,rgba(0,0,0,.55),rgba(0,0,0,.10) 60%,rgba(0,0,0,0))}
    .hero-content{position:absolute;left:26px;top:50%;transform:translateY(-50%);color:#fff;max-width:520px}
    .hero-title{font-size:34px;font-weight:900;margin-bottom:8px}
    .hero-text{font-size:14px;opacity:.95;line-height:1.45}

    /* CATÁLOGO */
    .catalog{width:min(1200px,92%);margin:0 auto;display:grid;grid-template-columns:260px 1fr;gap:18px}
    .cat-box{background:#fff;border-radius:16px;box-shadow:0 10px 22px rgba(0,0,0,.08);overflow:hidden}
    .cat-head{background:#1B0561;color:#fff;padding:14px 16px;font-weight:900}
    .cat-acc{padding:8px 0}
    .cat-group{border-bottom:1px solid #eef2f7}
    .cat-top{width:100%;display:flex;align-items:center;justify-content:space-between;padding:13px 16px;background:transparent;border:none;cursor:pointer;font-weight:900;color:#111}
    .cat-top:hover{background:#f5f7ff}
    .chev{transition:transform .18s ease;font-weight:900;opacity:.7}
    .cat-sub{display:none;padding:0 10px 10px}
    .cat-group.open .cat-sub{display:block}
    .cat-group.open .chev{transform:rotate(180deg)}

    .cat-subitem{width:100%;text-align:left;padding:10px 12px;border-radius:12px;background:#f8fafc;border:1px solid #eef2f7;cursor:pointer;font-weight:800;margin-top:8px;color:#111}
    .cat-subitem:hover{background:#eef2ff;border-color:#dbeafe}
    .cat-subitem.active{background:#1B0561;border-color:#1B0561;color:#fff}

    .products-top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .products-title{font-size:22px;font-weight:900;color:#111}
    .products-meta{font-size:12px;color:#666;font-weight:800}

    .products-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px}
    .pcard{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 10px 22px rgba(0,0,0,.08);transition:transform .12s ease, box-shadow .12s ease}
    .pcard:hover{transform:translateY(-2px);box-shadow:0 14px 28px rgba(0,0,0,.12)}
    .pimg{width:100%;height:170px;object-fit:cover;background:#e5e7eb;display:block}
    .pbody{padding:12px 12px 14px}
    .ptitle{font-weight:900;margin-bottom:6px;color:#111}
    .pdesc{font-size:12px;color:#666;line-height:1.35;margin-bottom:10px;min-height:32px}
    .pbottom{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .pprice{font-weight:900;color:#1B0561}

    /* BOTÓN Comprar ahora (sin +) */
    .buy-now{
      border:none;background:#2563eb;color:#fff;font-weight:900;
      padding:10px 12px;border-radius:12px;cursor:pointer;
      display:inline-flex;align-items:center;gap:10px;white-space:nowrap
    }
    .buy-now:hover{filter:brightness(1.06)}
    .buy-cart{width:18px;height:18px;fill:none;stroke:#fff;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}

    /* CARRUSEL */
    .best-wrap{width:min(1200px,92%);margin:6px auto 20px}
    .best-head{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;margin-bottom:10px}
    .best-title{font-size:22px;font-weight:900}
    .best-sub{font-size:12px;font-weight:800;color:#666}

    .best-carousel{position:relative;border-radius:18px}
    .best-viewport{overflow:hidden;border-radius:18px;position:relative}
    .best-viewport::before,.best-viewport::after{content:"";position:absolute;top:0;bottom:0;width:70px;pointer-events:none;z-index:4}
    .best-viewport::before{left:0;background:linear-gradient(90deg,rgba(246,247,251,1),rgba(246,247,251,0))}
    .best-viewport::after{right:0;background:linear-gradient(270deg,rgba(246,247,251,1),rgba(246,247,251,0))}
    .best-track{display:flex;gap:14px;padding:6px 52px;transition:transform .35s ease;will-change:transform}
    .best-card{flex:0 0 260px;background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 10px 22px rgba(0,0,0,.08)}
    .best-img{width:100%;height:150px;object-fit:cover;background:#e5e7eb;display:block}
    .best-body{padding:12px}
    .best-name{font-weight:900;margin-bottom:6px}
    .best-desc{font-size:12px;color:#666;min-height:30px;line-height:1.35}
    .best-bottom{display:flex;align-items:center;justify-content:space-between;margin-top:10px;gap:10px}
    .best-price{font-weight:900;color:#1B0561}
    .best-arrow{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;border-radius:999px;border:none;cursor:pointer;z-index:10;background:rgba(27,5,97,.92);color:#fff;font-size:18px}
    .best-arrow.left{left:6px}
    .best-arrow.right{right:6px}
    .best-arrow:hover{filter:brightness(1.08)}

    /* Toast simple */
    .toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background:rgba(17,17,17,.92);color:#fff;padding:10px 14px;border-radius:12px;
      font-weight:800;font-size:13px;display:none;z-index:9999
    }
    .toast.show{display:block}

    /* Responsive */
    @media (max-width:980px){.catalog{grid-template-columns:1fr}.products-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (max-width:560px){.hero-wide img{height:200px}.hero-title{font-size:24px}.products-grid{grid-template-columns:1fr}.best-card{flex-basis:220px}.best-track{padding:6px 40px}}
    @media (max-width:860px){.subbar-inner{flex-wrap:wrap}.subbar ul{justify-content:flex-start;flex-wrap:wrap}}
    @media (max-width:760px){.search{display:none}.slides{height:260px}.logo-img{height:60px}.subbar-inner{flex-direction:column;align-items:stretch;gap:10px}.subbar ul{justify-content:center}.subbar a{padding:9px 12px;font-size:14px}.all-products{justify-content:center}}
  </style>
</head>

<body>

  <div class="toast" id="toast">Añadido al carrito ✅</div>

  <!-- TOP BAR -->
  <header class="topbar">
    <div class="container topbar-row">
      <div class="brand">
        <img src="logojr.png" alt="JR DENT" class="logo-img">
      </div>

      <div class="search">
        <input type="text" placeholder="Buscar productos, repuestos, servicios..." />
        <button type="button">Buscar</button>
      </div>

      <div class="actions">
        <button class="linkbtn" id="btnLogin" type="button">Iniciar sesión</button>
        <button class="linkbtn" id="btnRegister" type="button">Crear cuenta</button>

        <button class="userpill hidden" id="userPill" type="button" title="Mi cuenta">
          <span class="avatar" id="avatarInitials">JR</span>
          <span class="username" id="userName">Usuario</span>
        </button>

        <button class="linkbtn" id="btnOrders" type="button">Mis compras</button>
        <button class="linkbtn hidden" id="btnLogout" type="button">Salir</button>

        <button class="cart-btn" type="button" id="btnCart" aria-label="Carrito">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          <span class="cart-count" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- SUB BAR -->
  <nav class="subbar">
    <div class="subbar-inner">
      <div class="all-products" id="allProductsBtn" title="Ver todos los productos">
        <span class="hamburger" aria-hidden="true"><span></span><span></span><span></span></span>
        Todos nuestros productos
      </div>
      <ul>
        <li><a href="#" id="navHome">Inicio</a></li>
        <li><a href="#" id="navEquipos">Equipos Dentales</a></li>
        <li><a href="#" id="navPiezas">Piezas de mano</a></li>
        <li><a href="#" id="navRepuestos">Repuestos</a></li>
        <li><a href="#" id="navServicio">Servicio técnico</a></li>
        <li><a href="#" id="navContacto">Contacto</a></li>
      </ul>
    </div>
  </nav>

  <!-- HOME -->
  <section id="homeSection">
    <section class="slider" id="homeSlider">
      <div class="slides">
        <img src="imagen1.jpg" class="slide active" alt="Banner 1">
        <img src="imagen2.jpg" class="slide" alt="Banner 2">
        <img src="imagen3.jpg" class="slide" alt="Banner 3">
      </div>
      <button class="arrow left" id="prevBtn" type="button">❮</button>
      <button class="arrow right" id="nextBtn" type="button">❯</button>
    </section>

    <main>
      <div class="container">
        <div class="card">
          <h1>Bienvenido a JR DENT</h1>
          <p>Tu página ya tiene la banda superior. Ahora iremos armando el resto (banner, productos, etc.).</p>
        </div>
      </div>
    </main>
  </section>

  <!-- EQUIPOS -->
  <section id="pageEquipos" class="page hidden">
    <div class="hero-wide">
      <img src="banner-equipos.jpg" alt="JR DENT - Equipos Dentales">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <div class="hero-title">Equipos Dentales</div>
        <div class="hero-text">Equipos, insumos y soluciones para tu consultorio. Envíos a todo Perú • Garantía • Soporte técnico.</div>
      </div>
    </div>

    <!-- CARRUSEL -->
    <div class="best-wrap">
      <div class="best-head">
        <h2 class="best-title">Nuestras Mejores Ofertas</h2>
        <p class="best-sub">Lo más pedido esta semana</p>
      </div>

      <div class="best-carousel">
        <button class="best-arrow left" id="bestPrev" type="button">❮</button>

        <div class="best-viewport">
          <div class="best-track" id="bestTrack">

            <article class="best-card" data-sku="eq-led-b" data-title="Lámpara Led B" data-price="199.99">
              <img class="best-img" src="eq1.jpg" alt="Producto 1">
              <div class="best-body">
                <div class="best-name">Lámpara Led B</div>
                <div class="best-desc">Lampara para Fotocurados</div>
                <div class="best-bottom">
                  <div class="best-price">S/ 199.99</div>
                  <button class="buy-now" type="button">
                    Comprar ahora
                    <svg class="buy-cart" viewBox="0 0 24 24" aria-hidden="true">
                      <circle cx="9" cy="21" r="1"></circle>
                      <circle cx="20" cy="21" r="1"></circle>
                      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </article>

            <article class="best-card" data-sku="eq-uds-m" data-title="UDS M" data-price="419.99">
              <img class="best-img" src="eq2.jpg" alt="Producto 2">
              <div class="best-body">
                <div class="best-name">UDS M</div>
                <div class="best-desc">Destartaje,Endodoncia</div>
                <div class="best-bottom">
                  <div class="best-price">S/ 419.99</div>
                  <button class="buy-now" type="button">
                    Comprar ahora
                    <svg class="buy-cart" viewBox="0 0 24 24" aria-hidden="true">
                      <circle cx="9" cy="21" r="1"></circle>
                      <circle cx="20" cy="21" r="1"></circle>
                      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </article>

            <article class="best-card" data-sku="eq-rayosx" data-title="Rayos X Portatil" data-price="6799.99">
              <img class="best-img" src="eq3.jpg" alt="Producto 3">
              <div class="best-body">
                <div class="best-name">Rayos X Portatil</div>
                <div class="best-desc">Rayos X con RVG</div>
                <div class="best-bottom">
                  <div class="best-price">S/ 6799.99</div>
                  <button class="buy-now" type="button">
                    Comprar ahora
                    <svg class="buy-cart" viewBox="0 0 24 24" aria-hidden="true">
                      <circle cx="9" cy="21" r="1"></circle>
                      <circle cx="20" cy="21" r="1"></circle>
                      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </article>

            <article class="best-card" data-sku="eq-iled-ii" data-title="I LED II" data-price="689.99">
              <img class="best-img" src="eq4.jpg" alt="Producto 4">
              <div class="best-body">
                <div class="best-name">I LED II</div>
                <div class="best-desc">Lampara Fotocurado de Alta Potencia</div>
                <div class="best-bottom">
                  <div class="best-price">S/ 689.99</div>
                  <button class="buy-now" type="button">
                    Comprar ahora
                    <svg class="buy-cart" viewBox="0 0 24 24" aria-hidden="true">
                      <circle cx="9" cy="21" r="1"></circle>
                      <circle cx="20" cy="21" r="1"></circle>
                      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </article>

            <article class="best-card" data-sku="eq-uds-u6" data-title="UDS U6" data-price="799.99">
              <img class="best-img" src="eq5.jpg" alt="Producto 5">
              <div class="best-body">
                <div class="best-name">UDS U6</div>
                <div class="best-desc">ultra Sonido Tactil</div>
                <div class="best-bottom">
                  <div class="best-price">S/ 799.99</div>
                  <button class="buy-now" type="button">
                    Comprar ahora
                    <svg class="buy-cart" viewBox="0 0 24 24" aria-hidden="true">
                      <circle cx="9" cy="21" r="1"></circle>
                      <circle cx="20" cy="21" r="1"></circle>
                      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </article>

          </div>
        </div>

        <button class="best-arrow right" id="bestNext" type="button">❯</button>
      </div>
    </div>

    <!-- CATÁLOGO EQUIPOS -->
    <div class="catalog" data-catalog="equipos">
      <aside class="cat-box">
        <div class="cat-head">Categorías</div>

        <div class="cat-acc">
          <div class="cat-group open">
            <button class="cat-top" type="button">Todos <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem active" type="button" data-cat="todo" data-brand="all">Ver todo</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Ultra Sonidos <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Ultra Sonidos" data-brand="UDS-J1">UDS-J1</button>
              <button class="cat-subitem" type="button" data-cat="Ultra Sonidos" data-brand="UDS-J2">UDS-J2</button>
              <button class="cat-subitem" type="button" data-cat="Ultra Sonidos" data-brand="UDS-A LED">UDS-A LED</button>
              <button class="cat-subitem" type="button" data-cat="Ultra Sonidos" data-brand="UDS-E LED">UDS-E LED</button>
              <button class="cat-subitem" type="button" data-cat="Ultra Sonidos" data-brand="UDS-U6">UDS-U6</button>
              <button class="cat-subitem" type="button" data-cat="Ultra Sonidos" data-brand="UDS-M">UDS-M</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Lamparas <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Lamparas" data-brand="LED B">LED B</button>
              <button class="cat-subitem" type="button" data-cat="Lamparas" data-brand="LED D">LED D</button>
              <button class="cat-subitem" type="button" data-cat="Lamparas" data-brand="LED F">LED F</button>
              <button class="cat-subitem" type="button" data-cat="Lamparas" data-brand="I LED">I LED</button>
              <button class="cat-subitem" type="button" data-cat="Lamparas" data-brand="I LED PLUS">I LED PLUS</button>
              <button class="cat-subitem" type="button" data-cat="Lamparas" data-brand="I LED MAX">I LED MAX</button>
              <button class="cat-subitem" type="button" data-cat="Lamparas" data-brand="I LED II">I LED II</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Endomotor <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Endomotor" data-brand="ENDO-MOTOR">ENDO-MOTOR</button>
              <button class="cat-subitem" type="button" data-cat="Endomotor" data-brand="ZR-TOUCH">ZR TOUCH</button>
              <button class="cat-subitem" type="button" data-cat="Endomotor" data-brand="BR-TOUCH">BR TOUCH</button>
              <button class="cat-subitem" type="button" data-cat="Endomotor" data-brand="ENDO-MASTER">ENDO-MASTER</button>
              <button class="cat-subitem" type="button" data-cat="Endomotor" data-brand="LOCALIZADOR">LOCALIZADOR</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Rayos X <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Rayos X" data-brand="Rayos X Portatil">Rayos X Portatil</button>
              <button class="cat-subitem" type="button" data-cat="Rayos X" data-brand="RVG">RVG</button>
            </div>
          </div>

        </div>
      </aside>

      <section class="products-area">
        <div class="products-top">
          <div class="products-title" id="equiposTitle">Equipos Dentales</div>
          <div class="products-meta" id="equiposMeta">Mostrando 0 producto(s)</div>
        </div>

        <div class="products-grid" id="equiposGrid">
          <article class="pcard" data-cat="Ultra Sonidos" data-brands="UDS-J1" data-sku="eqp-uds-j1" data-title="UDS J1" data-price="480.00">
            <img class="pimg" src="eqp1.jpg" alt="UDS J1">
            <div class="pbody">
              <div class="ptitle">UDS J1</div>
              <div class="pdesc">Destartraje</div>
              <div class="pbottom">
                <div class="pprice">S/480.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Lamparas" data-brands="LED B" data-sku="eqp-led-b" data-title="Lampara LED B" data-price="200.00">
            <img class="pimg" src="eqp2.jpg" alt="Lámpara LED B">
            <div class="pbody">
              <div class="ptitle">Lampara LED B</div>
              <div class="pdesc">Potencia 1200 • Fotocurado 5/20s</div>
              <div class="pbottom">
                <div class="pprice">S/ 200.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Endomotor" data-brands="ENDO-MOTOR" data-sku="eqp-endo-motor" data-title="ENDO MOTOR" data-price="750.00">
            <img class="pimg" src="eqp3.jpg" alt="ENDO MOTOR">
            <div class="pbody">
              <div class="ptitle">ENDO MOTOR</div>
              <div class="pdesc">Endodoncia rotatoria</div>
              <div class="pbottom">
                <div class="pprice">S/ 750.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Rayos X" data-brands="Rayos X Portatil" data-sku="eqp-rayosx" data-title="RAYOS X PORTATIL" data-price="3600.00">
            <img class="pimg" src="eqp4.jpg" alt="RAYOS X">
            <div class="pbody">
              <div class="ptitle">RAYOS X PORTATIL</div>
              <div class="pdesc">Rayos X portátil</div>
              <div class="pbottom">
                <div class="pprice">S/ 3600.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>
        </div>
      </section>
    </div>
  </section>

  <!-- REPUESTOS -->
  <section id="pageRepuestos" class="page hidden">
    <div class="hero-wide">
      <img src="banner-repuestos.jpg" alt="JR DENT - Repuestos">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <div class="hero-title">Repuestos y Accesorios</div>
        <div class="hero-text">Repuestos para piezas de mano, turbinas, micromotores y más. Envíos a todo Perú • Atención rápida • Garantía.</div>
      </div>
    </div>

    <div class="catalog" data-catalog="repuestos">
      <aside class="cat-box">
        <div class="cat-head">Categorías</div>

        <div class="cat-acc">
          <div class="cat-group open">
            <button class="cat-top" type="button">Todos <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem active" type="button" data-cat="todo" data-brand="all">Ver todo</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Repuestos de Turbina <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Repuestos de Turbina" data-brand="NSK">NSK</button>
              <button class="cat-subitem" type="button" data-cat="Repuestos de Turbina" data-brand="BEING">BEING</button>
              <button class="cat-subitem" type="button" data-cat="Repuestos de Turbina" data-brand="YOUNITY">YOUNITY</button>
              <button class="cat-subitem" type="button" data-cat="Repuestos de Turbina" data-brand="KAVO">KAVO</button>
              <button class="cat-subitem" type="button" data-cat="Repuestos de Turbina" data-brand="SIGMA">SIGMA</button>
              <button class="cat-subitem" type="button" data-cat="Repuestos de Turbina" data-brand="WyH">WyH</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Rodajes <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Rodajes" data-brand="NSK">NSK</button>
              <button class="cat-subitem" type="button" data-cat="Rodajes" data-brand="BEING">BEING</button>
              <button class="cat-subitem" type="button" data-cat="Rodajes" data-brand="YOUNITY">YOUNITY</button>
              <button class="cat-subitem" type="button" data-cat="Rodajes" data-brand="KAVO">KAVO</button>
              <button class="cat-subitem" type="button" data-cat="Rodajes" data-brand="WyH">WyH</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Repuestos de Micromotor <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Repuestos de Micromotor" data-brand="MARATHON">MARATHON</button>
              <button class="cat-subitem" type="button" data-cat="Repuestos de Micromotor" data-brand="STRONG">STRONG</button>
              <button class="cat-subitem" type="button" data-cat="Repuestos de Micromotor" data-brand="RENHE">RENHE</button>
            </div>
          </div>

          <div class="cat-group">
            <button class="cat-top" type="button">Repuestos Extras <span class="chev">▾</span></button>
            <div class="cat-sub">
              <button class="cat-subitem" type="button" data-cat="Repuestos Extras" data-brand="Woodpecker">Woodpecker</button>
            </div>
          </div>
        </div>
      </aside>

      <section class="products-area">
        <div class="products-top">
          <div class="products-title" id="productsTitle">Repuestos</div>
          <div class="products-meta" id="productsMeta">Mostrando 0 producto(s)</div>
        </div>

        <div class="products-grid" id="productsGrid">
          <article class="pcard" data-cat="Rodajes" data-brands="NSK,BEING" data-sku="rep-rodaje-nsk-gen" data-title="Rodaje Cerámico NSK (Genérico)" data-price="40.00">
            <img class="pimg" src="p1.jpg" alt="Rodaje Ceramico">
            <div class="pbody">
              <div class="ptitle">Rodaje Cerámico NSK (Genérico)</div>
              <div class="pdesc">Rodaje cerámico modelo NSK (genérico) para alta velocidad.</div>
              <div class="pbottom">
                <div class="pprice">S/40.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Rodajes" data-brands="KAVO" data-sku="rep-rodaje-kavo" data-title="Rodaje Cerámico Kavo" data-price="40.00">
            <img class="pimg" src="p2.jpg" alt="Rodaje Cerámico Kavo">
            <div class="pbody">
              <div class="ptitle">Rodaje Cerámico Kavo</div>
              <div class="pdesc">Rodaje cerámico modelo Kavo para alta velocidad.</div>
              <div class="pbottom">
                <div class="pprice">S/40.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Repuestos de Turbina" data-brands="NSK" data-sku="rep-rotor-ca" data-title="Rotor Contra Ángulo" data-price="80.00">
            <img class="pimg" src="p4.jpg" alt="Rotor Contra Angulo">
            <div class="pbody">
              <div class="ptitle">Rotor Contra Ángulo</div>
              <div class="pdesc">Rotor de pieza de mano de baja, contra ángulo.</div>
              <div class="pbottom">
                <div class="pprice">S/80.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Rodajes" data-brands="WyH" data-sku="rep-rodaje-wyh" data-title="Rodaje WyH" data-price="60.00">
            <img class="pimg" src="p7.jpg" alt="Rodaje WyH">
            <div class="pbody">
              <div class="ptitle">Rodaje WyH</div>
              <div class="pdesc">Rodaje cerámico WyH.</div>
              <div class="pbottom">
                <div class="pprice">S/60.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Repuestos de Turbina" data-brands="NSK" data-sku="rep-seguro-ca" data-title="Seguro de Contra Ángulo" data-price="15.00">
            <img class="pimg" src="p8.jpg" alt="Seguro de Contra Angulo">
            <div class="pbody">
              <div class="ptitle">Seguro de Contra Ángulo</div>
              <div class="pdesc">Seguro de contra ángulo NSK.</div>
              <div class="pbottom">
                <div class="pprice">S/15.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>

          <article class="pcard" data-cat="Repuestos de Turbina" data-brands="NSK" data-sku="rep-tapa-nsk" data-title="Tapa NSK" data-price="20.00">
            <img class="pimg" src="p9.jpg" alt="Tapa NSK">
            <div class="pbody">
              <div class="ptitle">Tapa NSK</div>
              <div class="pdesc">Tapa NSK Pana Air.</div>
              <div class="pbottom">
                <div class="pprice">S/20.00</div>
                <button class="buy-now" type="button">Comprar ahora
                  <svg class="buy-cart" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
                </button>
              </div>
            </div>
          </article>
        </div>
      </section>
    </div>
  </section>

  <!-- ===========================
       JS: TODO en UNO (SIN romper)
       =========================== -->
  <script>
    (function(){
      const $ = (sel, root=document) => root.querySelector(sel);
      const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
      const norm = (v) => (v || "").toString().trim().toLowerCase();
      const splitList = (v) => (v || "").toString().split(",").map(x=>norm(x)).filter(Boolean);

      // ========= Carrito (localStorage) =========
      const CART_KEY = "jr_cart_v1";
      function loadCart(){
        try { return JSON.parse(localStorage.getItem(CART_KEY) || "[]"); }
        catch(e){ return []; }
      }
      function saveCart(cart){
        localStorage.setItem(CART_KEY, JSON.stringify(cart));
      }
      function cartCount(){
        const cart = loadCart();
        return cart.reduce((acc,it)=>acc+(it.qty||1),0);
      }
      function updateCartBadge(){
        const el = $("#cartCount");
        if(el) el.textContent = String(cartCount());
      }
      function toast(msg){
        const t = $("#toast");
        if(!t) return;
        t.textContent = msg || "Añadido al carrito ✅";
        t.classList.add("show");
        clearTimeout(toast._timer);
        toast._timer = setTimeout(()=>t.classList.remove("show"), 1200);
      }
      function addToCartFromCard(card){
        const sku = card?.dataset?.sku || ("sku-"+Math.random().toString(16).slice(2));
        const title = card?.dataset?.title || card?.querySelector(".ptitle,.best-name")?.textContent?.trim() || "Producto";
        const price = Number(card?.dataset?.price || "0");
        const img = card?.querySelector("img")?.getAttribute("src") || "";

        const cart = loadCart();
        const idx = cart.findIndex(x=>x.sku===sku);
        if(idx>=0) cart[idx].qty = (cart[idx].qty||1) + 1;
        else cart.push({ sku, title, price, img, qty: 1 });

        saveCart(cart);
        updateCartBadge();
        toast(${title} ✅ agregado al carrito);
      }

      // Delegación: Comprar ahora (carrusel + grids)
      document.addEventListener("click", (e)=>{
        const btn = e.target.closest(".buy-now");
        if(!btn) return;

        // el "card" puede ser pcard o best-card
        const card = btn.closest(".pcard") || btn.closest(".best-card");
        if(card) addToCartFromCard(card);
      });

      // ========= Navegación páginas =========
      const homeSection = $("#homeSection");
      const pageEquipos = $("#pageEquipos");
      const pageRepuestos = $("#pageRepuestos");

      function hideAllPages(){
        homeSection?.classList.add("hidden");
        pageEquipos?.classList.add("hidden");
        pageRepuestos?.classList.add("hidden");
      }
      function goPage(name){
        hideAllPages();
        if(name==="equipos") pageEquipos?.classList.remove("hidden");
        else if(name==="repuestos") pageRepuestos?.classList.remove("hidden");
        else homeSection?.classList.remove("hidden");
        window.scrollTo({top:0, behavior:"smooth"});
      }

      $("#navHome")?.addEventListener("click",(e)=>{e.preventDefault();goPage("home");});
      $("#navEquipos")?.addEventListener("click",(e)=>{e.preventDefault();goPage("equipos");});
      $("#navRepuestos")?.addEventListener("click",(e)=>{e.preventDefault();goPage("repuestos");});
      $("#allProductsBtn")?.addEventListener("click",()=>goPage("repuestos"));

      // ========= Slider Home =========
      function initHomeSlider(){
        const slider = $("#homeSlider");
        if(!slider) return;
        const slides = $$(".slide", slider);
        const nextBtn = $("#nextBtn");
        const prevBtn = $("#prevBtn");
        if(slides.length===0 || !nextBtn || !prevBtn) return;

        let current = 0;
        const show = (i)=>{ slides.forEach(s=>s.classList.remove("active")); slides[i].classList.add("active"); };
        const next = ()=>{ current=(current+1)%slides.length; show(current); };
        const prev = ()=>{ current=(current-1+slides.length)%slides.length; show(current); };

        nextBtn.addEventListener("click", next);
        prevBtn.addEventListener("click", prev);
        setInterval(next, 5000);
      }

      // ========= Carrusel Equipos (siempre init) =========
      function initBestCarousel(){
        const track = $("#bestTrack");
        const prev  = $("#bestPrev");
        const next  = $("#bestNext");
        if(!track || !prev || !next) return;

        // Evitar duplicar si recargas con hot reload
        if(track.dataset.inited === "1") return;
        track.dataset.inited = "1";

        const originals = Array.from(track.children);
        // duplicar para loop
        originals.forEach(card => track.appendChild(card.cloneNode(true)));

        let index = 0;

        function cardStep(){
          const first = track.querySelector(".best-card");
          if(!first) return 274;
          const gap = parseFloat(getComputedStyle(track).gap || "14");
          const w = first.getBoundingClientRect().width || 260;
          return w + gap;
        }

        function totalOriginal(){ return originals.length; }

        function render(animate=true){
          track.style.transition = animate ? "transform .35s ease" : "none";
          track.style.transform = translateX(${-index * cardStep()}px);
        }

        function nextMove(){
          index++;
          render(true);
          if(index >= totalOriginal()){
            setTimeout(()=>{ index = 0; render(false); }, 360);
          }
        }

        function prevMove(){
          if(index===0){
            index = totalOriginal();
            render(false);
            requestAnimationFrame(()=>{ index--; render(true); });
            return;
          }
          index--;
          render(true);
        }

        next.addEventListener("click", nextMove);
        prev.addEventListener("click", prevMove);

        // auto
        let auto = setInterval(nextMove, 4500);
        // si el usuario hace click, reiniciamos
        function resetAuto(){
          clearInterval(auto);
          auto = setInterval(nextMove, 4500);
        }
        next.addEventListener("click", resetAuto);
        prev.addEventListener("click", resetAuto);

        window.addEventListener("resize", ()=>render(false));
        render(false);
      }

      // ========= Filtro categorías por catálogo (robusto) =========
      function setupCatalog(catalogRoot){
        const grid = $(".products-grid", catalogRoot);
        const titleEl = $(".products-title", catalogRoot) || catalogRoot.querySelector("#productsTitle, #equiposTitle");
        const metaEl  = $(".products-meta", catalogRoot)  || catalogRoot.querySelector("#productsMeta, #equiposMeta");
        const sidebar = $(".cat-box", catalogRoot);
        if(!grid || !sidebar) return;

        const cards = $$(".pcard", grid);

        let currentCat = "todo";
        let currentBrand = "all";

        function cap(s){ return s ? (s.charAt(0).toUpperCase()+s.slice(1)) : s; }

        function apply(){
          let shown = 0;
          cards.forEach(card=>{
            const cat = norm(card.dataset.cat);
            const brandsRaw = card.dataset.brands || card.dataset.brand || "";
            const brands = splitList(brandsRaw);

            const okCat = (currentCat==="todo") || (cat===currentCat);
            const okBrand = (currentBrand==="all") || brands.includes(currentBrand);

            const show = okCat && okBrand;
            card.style.display = show ? "" : "none";
            if(show) shown++;
          });

          if(titleEl){
            const catLabel = currentCat==="todo" ? "Todos" : currentCat;
            const brandLabel = currentBrand==="all" ? "" : ` • ${currentBrand.toUpperCase()}`;
            titleEl.textContent = cap(catLabel) + brandLabel;
          }
          if(metaEl) metaEl.textContent = Mostrando ${shown} producto(s);
        }

        // Acordeón
        $$(".cat-top", sidebar).forEach(btn=>{
          btn.addEventListener("click", ()=>{
            btn.closest(".cat-group")?.classList.toggle("open");
          });
        });

        function setActive(btn){
          $$(".cat-subitem", sidebar).forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");
        }

        // Click en subitems: filtro
        $$(".cat-subitem", sidebar).forEach(btn=>{
          btn.addEventListener("click", ()=>{
            currentCat = norm(btn.dataset.cat || "todo");
            currentBrand = norm(btn.dataset.brand || "all"); // SOLO data-brand (ya normalizado)
            setActive(btn);
            btn.closest(".cat-group")?.classList.add("open");
            apply();
          });
        });

        apply();
      }

      // ========= INIT =========
      document.addEventListener("DOMContentLoaded", ()=>{
        updateCartBadge();
        initHomeSlider();
        initBestCarousel();

        // Configurar ambos catálogos (equipos y repuestos)
        $$(".catalog").forEach(setupCatalog);
      });

      // Exponer goPage por si quieres usar desde consola
      window.goPage = goPage;
    })();
  </script>

</body>
</html>




































































































































































































