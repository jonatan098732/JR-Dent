<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JR DENT</title>

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background: #f6f7fb; color: #111; }

    /* ====== TOP BAR ====== */
    .topbar { background: #99D5F7; color: white; padding: 10px 0; }

    .container { width: min(1100px, 92%); margin: 0 auto; }

    .topbar-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; }

    .brand { display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.3px; }

    .logo-img { height: 80px; width: auto; display:block; }

    .search { flex: 1; display: flex; gap: 8px; max-width: 520px; margin: 0 12px; }
    .search input { width: 100%; padding: 10px 12px; border-radius: 10px; border: none; outline: none; }
    .search button { padding: 10px 12px; border-radius: 10px; border: none; cursor: pointer; font-weight: 700; background: #2563eb; color: white; }

    .actions { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }

    .linkbtn {
      background: transparent;
      border: 2px solid white;
      color: white;
      padding: 8px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      transition: 0.3s;
    }
    .linkbtn:hover { background: white; color: #111; }

    .cart-btn{
      position: relative;
      background: transparent;
      border: 2px solid white;
      color: white;
      font-size: 20px;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }
    .cart-btn:hover{ background:white; color:#111; }

    .cart-count{
      position:absolute;
      top:-6px;
      right:-6px;
      background:red;
      color:white;
      font-size:12px;
      padding:2px 6px;
      border-radius:50%;
    }

    /* ====== SUB BAR ====== */
    .subbar { background: #1B0561; color: rgba(255,255,255,0.9); padding: 8px 0; font-size: 14px; }
    .subbar ul { list-style: none; display: flex; gap: 14px; flex-wrap: wrap; }
    .subbar a { color: inherit; text-decoration: none; opacity: 0.9; }
    .subbar a:hover { opacity: 1; text-decoration: underline; }

    /* ===== SLIDER ===== */
    .slider { position: relative; width: min(1200px, 92%); margin: 20px auto; overflow: hidden; border-radius: 16px; background: #e5e7eb; }
    .slides { position: relative; height: 480px; }
    .slide {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      background: #e5e7eb;
      opacity: 0;
      transition: opacity 0.6s ease;
    }
    .slide.active { opacity: 1; }

    .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.5);
      border: none;
      color: white;
      font-size: 32px;
      padding: 10px 14px;
      cursor: pointer;
      border-radius: 50%;
      z-index: 10;
    }
    .arrow.left { left: 15px; }
    .arrow.right { right: 15px; }
    .arrow:hover { background: rgba(0,0,0,0.8); }

    /* ====== MAIN ====== */
    main { padding: 28px 0; }
    .card { background: white; border-radius: 16px; padding: 18px; box-shadow: 0 10px 24px rgba(0,0,0,0.08); }

    /* ====== AUTH SECTION (debajo de subbar) ====== */
    .auth-wrap { width: min(520px, 92%); margin: 22px auto 10px; }
    .auth-card { background: white; border-radius: 16px; padding: 18px; box-shadow: 0 10px 24px rgba(0,0,0,0.10); }
    .auth-title { font-size: 28px; margin-bottom: 6px; }
    .auth-sub { color:#666; margin-bottom: 14px; }

    .auth-tabs { display:flex; gap:10px; margin-bottom: 14px; }
    .auth-tab {
      flex:1;
      padding:10px 12px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      background:#f9fafb;
      cursor:pointer;
      font-weight: 800;
    }
    .auth-tab.active { background:#2563eb; color:white; border-color:#2563eb; }

    .grid2 { display:grid; gap:10px; grid-template-columns: 1fr 1fr; }
    .grid1 { display:grid; gap:10px; grid-template-columns: 1fr; }

    label { font-size: 13px; font-weight: 800; color:#111; }
    input {
      width:100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      outline: none;
    }
    input:focus { border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.12); }

    .btn-row { display:grid; gap:10px; margin-top: 12px; }

    .btn-primary {
      padding: 10px 12px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 900;
      background: #22c55e;
      color: #0b1020;
    }
    .btn-google {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      cursor: pointer;
      font-weight: 900;
      background: white;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    .google-icon { width:18px; height:18px; display:block; }

    .auth-hint { font-size: 12px; color:#666; margin-top: 10px; }
    .auth-error { color:#b91c1c; font-weight:800; margin-top:10px; display:none; }
    .auth-ok { color:#166534; font-weight:800; margin-top:10px; display:none; }

    .hidden { display:none !important; }

    @media (max-width: 760px) {
      .search { display: none; }
      .slides { height: 260px; }
      .logo-img { height: 60px; }
      .grid2 { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <!-- BANDA SUPERIOR -->
  <header class="topbar">
    <div class="container topbar-row">
      <div class="brand">
        <img src="logojr.png" alt="JR DENT" class="logo-img">
      </div>

      <div class="search">
        <input type="text" placeholder="Buscar productos, repuestos, servicios..." />
        <button type="button">Buscar</button>
      </div>

      <div class="actions">
        <button class="linkbtn" id="btnLogin" type="button">Iniciar sesi√≥n</button>
        <button class="linkbtn" id="btnRegister" type="button">Crear cuenta</button>
        <button class="linkbtn" id="btnOrders" type="button">Mis compras</button>
        <button class="cart-btn" type="button" id="btnCart">
          üõí <span class="cart-count" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- BARRA DE CATEGOR√çAS -->
  <nav class="subbar">
    <div class="container">
      <ul>
        <li><a href="#" id="navHome">Inicio</a></li>
        <li><a href="#">Repuestos</a></li>
        <li><a href="#">Piezas de mano</a></li>
        <li><a href="#">Servicio t√©cnico</a></li>
        <li><a href="#">Contacto</a></li>
      </ul>
    </div>
  </nav>

  <!-- HOME -->
  <section id="homeSection">
    <section class="slider" id="homeSlider">
      <div class="slides">
        <img src="imagen1.jpg" class="slide active" alt="Banner 1">
        <img src="imagen2.jpg" class="slide" alt="Banner 2">
        <img src="imagen3.jpg" class="slide" alt="Banner 3">
      </div>
      <button class="arrow left" id="prevBtn" type="button">‚ùÆ</button>
      <button class="arrow right" id="nextBtn" type="button">‚ùØ</button>
    </section>

    <main>
      <div class="container">
        <div class="card">
          <h1>Bienvenido a JR DENT</h1>
          <p>Tu p√°gina ya tiene la banda superior. Ahora iremos armando el resto (banner, productos, etc.).</p>
        </div>
      </div>
    </main>
  </section>

  <!-- AUTH -->
  <section id="authSection" class="hidden">
    <div class="auth-wrap">
      <div class="auth-card">
        <h2 class="auth-title" id="authTitle">Iniciar sesi√≥n</h2>
        <p class="auth-sub" id="authSub">Accede para ver tus compras y guardar favoritos.</p>

        <div class="auth-tabs">
          <button class="auth-tab active" id="tabLogin" type="button">Login</button>
          <button class="auth-tab" id="tabRegister" type="button">Registro</button>
        </div>

        <!-- LOGIN FORM -->
        <div id="loginForm">
          <div class="grid1">
            <div>
              <label for="loginEmail">Correo</label>
              <input id="loginEmail" type="email" placeholder="correo@email.com" />
            </div>
            <div>
              <label for="loginPassword">Contrase√±a</label>
              <input id="loginPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            </div>
          </div>

          <div class="btn-row">
            <button class="btn-primary" id="btnDoLogin" type="button">Entrar</button>
            <button class="btn-google" id="btnGoogleLogin" type="button">
              <img class="google-icon" src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
              Continuar con Google
            </button>
          </div>
        </div>

        <!-- REGISTER FORM -->
        <div id="registerForm" class="hidden">
          <div class="grid2">
            <div>
              <label for="regName">Nombre</label>
              <input id="regName" type="text" placeholder="Tu nombre completo" />
            </div>
            <div>
              <label for="regPhone">Tel√©fono</label>
              <input id="regPhone" type="tel" placeholder="Ej: 999 999 999" />
            </div>
          </div>

          <div class="grid2" style="margin-top:10px;">
            <div>
              <label for="regCountry">Pa√≠s</label>
              <input id="regCountry" type="text" placeholder="Ej: Per√∫" />
            </div>
            <div>
              <label for="regDistrict">Distrito</label>
              <input id="regDistrict" type="text" placeholder="Ej: Los Olivos" />
            </div>
          </div>

          <div class="grid1" style="margin-top:10px;">
            <div>
              <label for="regAddress">Direcci√≥n</label>
              <input id="regAddress" type="text" placeholder="Ej: Av. ... #..." />
            </div>
          </div>

          <div class="grid1" style="margin-top:10px;">
            <div>
              <label for="regEmail">Correo</label>
              <input id="regEmail" type="email" placeholder="correo@email.com" />
            </div>
          </div>

          <div class="grid2" style="margin-top:10px;">
            <div>
              <label for="regPassword">Contrase√±a</label>
              <input id="regPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            </div>
            <div>
              <label for="regPassword2">Confirmar contrase√±a</label>
              <input id="regPassword2" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            </div>
          </div>

          <div class="btn-row">
            <button class="btn-primary" id="btnDoRegister" type="button">Crear cuenta</button>
            <button class="btn-google" id="btnGoogleRegister" type="button">
              <img class="google-icon" src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
              Registrarme con Google
            </button>
          </div>
        </div>

        <div class="auth-error" id="authError"></div>
        <div class="auth-ok" id="authOk"></div>

        <div class="auth-hint">
          * El registro guarda tus datos en Firebase (Auth + Firestore).
        </div>
      </div>
    </div>
  </section>

  <!-- ====== JS UI + SLIDER (normal) ====== -->
  <script>
    const homeSection = document.getElementById("homeSection");
    const authSection = document.getElementById("authSection");

    const btnLogin = document.getElementById("btnLogin");
    const btnRegister = document.getElementById("btnRegister");
    const navHome = document.getElementById("navHome");

    const tabLogin = document.getElementById("tabLogin");
    const tabRegister = document.getElementById("tabRegister");

    const loginForm = document.getElementById("loginForm");
    const registerForm = document.getElementById("registerForm");

    const authTitle = document.getElementById("authTitle");
    const authSub = document.getElementById("authSub");

    const authError = document.getElementById("authError");
    const authOk = document.getElementById("authOk");

    function showError(msg) {
      authOk.style.display = "none";
      authError.style.display = "block";
      authError.textContent = msg;
    }
    function showOk(msg) {
      authError.style.display = "none";
      authOk.style.display = "block";
      authOk.textContent = msg;
    }
    function clearMsgs() {
      authError.style.display = "none";
      authOk.style.display = "none";
      authError.textContent = "";
      authOk.textContent = "";
    }

    function showHome() {
      clearMsgs();
      authSection.classList.add("hidden");
      homeSection.classList.remove("hidden");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
    // ‚úÖ Exponer para el script m√≥dulo (Firebase)
    window.showHome = showHome;

    function showAuth(mode) {
      clearMsgs();
      homeSection.classList.add("hidden");
      authSection.classList.remove("hidden");
      setAuthMode(mode);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function setAuthMode(mode) {
      const isLogin = mode === "login";
      tabLogin.classList.toggle("active", isLogin);
      tabRegister.classList.toggle("active", !isLogin);
      loginForm.classList.toggle("hidden", !isLogin);
      registerForm.classList.toggle("hidden", isLogin);

      authTitle.textContent = isLogin ? "Iniciar sesi√≥n" : "Crear cuenta";
      authSub.textContent = isLogin
        ? "Accede para ver tus compras y guardar favoritos."
        : "Reg√≠strate para comprar m√°s r√°pido y ver tu historial.";
    }

    btnLogin.addEventListener("click", () => showAuth("login"));
    btnRegister.addEventListener("click", () => showAuth("register"));
    navHome.addEventListener("click", (e) => { e.preventDefault(); showHome(); });

    tabLogin.addEventListener("click", () => setAuthMode("login"));
    tabRegister.addEventListener("click", () => setAuthMode("register"));

    // ===== SLIDER =====
    document.addEventListener("DOMContentLoaded", () => {
      const slider = document.getElementById("homeSlider");
      const slides = slider ? slider.querySelectorAll(".slide") : [];
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      if (!slider || slides.length === 0 || !nextBtn || !prevBtn) return;

      let current = 0;
      function show(i) {
        slides.forEach(s => s.classList.remove("active"));
        slides[i].classList.add("active");
      }
      function next() { current = (current + 1) % slides.length; show(current); }
      function prev() { current = (current - 1 + slides.length) % slides.length; show(current); }

      nextBtn.addEventListener("click", next);
      prevBtn.addEventListener("click", prev);
      setInterval(next, 5000);
    });
  </script>

  <!-- ====== FIREBASE (1 sola vez, corregido) ====== -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
    import {
      getAuth, GoogleAuthProvider, signInWithPopup,
      createUserWithEmailAndPassword, signInWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
    import { getFirestore, doc, setDoc }
      from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

    // ‚úÖ Tu config real
    const firebaseConfig = {
      apiKey: "AIzaSyDFSDPcgPmtDiNWVHZg46RKxE8ygPV99FM",
      authDomain: "jr-dent.firebaseapp.com",
      projectId: "jr-dent",
      storageBucket: "jr-dent.firebasestorage.app",
      messagingSenderId: "981855232370",
      appId: "1:981855232370:web:9c915085a08563503f7deb",
      measurementId: "G-6E1LVQLC2T"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    // Mensajes
    const authError = document.getElementById("authError");
    const authOk = document.getElementById("authOk");

    function showError(msg) {
      authOk.style.display = "none";
      authError.style.display = "block";
      authError.textContent = msg;
      console.error("[AUTH ERROR]", msg);
    }
    function showOk(msg) {
      authError.style.display = "none";
      authOk.style.display = "block";
      authOk.textContent = msg;
      console.log("[AUTH OK]", msg);
    }

    // Inputs login
    const loginEmail = document.getElementById("loginEmail");
    const loginPassword = document.getElementById("loginPassword");
    const btnDoLogin = document.getElementById("btnDoLogin");
    const btnGoogleLogin = document.getElementById("btnGoogleLogin");

    // Inputs register
    const regName = document.getElementById("regName");
    const regPhone = document.getElementById("regPhone");
    const regCountry = document.getElementById("regCountry");
    const regDistrict = document.getElementById("regDistrict");
    const regAddress = document.getElementById("regAddress");
    const regEmail = document.getElementById("regEmail");
    const regPassword = document.getElementById("regPassword");
    const regPassword2 = document.getElementById("regPassword2");
    const btnDoRegister = document.getElementById("btnDoRegister");
    const btnGoogleRegister = document.getElementById("btnGoogleRegister");

    async function saveUserProfile(uid, data) {
      await setDoc(doc(db, "users", uid), {
        ...data,
        updatedAt: new Date().toISOString()
      }, { merge: true });
    }

    // ===== LOGIN EMAIL =====
    btnDoLogin.addEventListener("click", async () => {
      try {
        const email = (loginEmail.value || "").trim();
        const pass = loginPassword.value || "";
        if (!email || !pass) return showError("Completa correo y contrase√±a.");

        await signInWithEmailAndPassword(auth, email, pass);
        showOk("‚úÖ Sesi√≥n iniciada. Bienvenido.");

        setTimeout(() => window.showHome?.(), 800);
      } catch (e) {
        showError(e?.message || String(e));
      }
    });

    // ===== LOGIN GOOGLE =====
    btnGoogleLogin.addEventListener("click", async () => {
      try {
        const result = await signInWithPopup(auth, provider);

        await saveUserProfile(result.user.uid, {
          email: result.user.email || "",
          nombre: result.user.displayName || ""
        });

        showOk("‚úÖ Entraste con Google: " + (result.user.email || ""));
        setTimeout(() => window.showHome?.(), 800);
      } catch (e) {
        showError(e?.message || String(e));
      }
    });

    // ===== REGISTER EMAIL + PERFIL =====
    btnDoRegister.addEventListener("click", async () => {
      try {
        const nombre = (regName.value || "").trim();
        const telefono = (regPhone.value || "").trim();
        const pais = (regCountry.value || "").trim();
        const distrito = (regDistrict.value || "").trim();
        const direccion = (regAddress.value || "").trim();

        const email = (regEmail.value || "").trim();
        const pass = regPassword.value || "";
        const pass2 = regPassword2.value || "";

        if (!nombre || !pais || !distrito || !direccion || !telefono) {
          return showError("Completa: Nombre, Pa√≠s, Distrito, Direcci√≥n y Tel√©fono.");
        }
        if (!email || !pass || !pass2) return showError("Completa correo y contrase√±as.");
        if (pass.length < 6) return showError("La contrase√±a debe tener m√≠nimo 6 caracteres.");
        if (pass !== pass2) return showError("Las contrase√±as no coinciden.");

        const cred = await createUserWithEmailAndPassword(auth, email, pass);

        await saveUserProfile(cred.user.uid, {
          nombre, pais, distrito, direccion, telefono, email
        });

        showOk("‚úÖ Cuenta creada y datos guardados.");
        // Ojo: Firebase NO env√≠a correo por defecto al crear cuenta.
        setTimeout(() => window.showHome?.(), 1200);
      } catch (e) {
        showError(e?.message || String(e));
      }
    });

    // ===== REGISTER GOOGLE =====
    btnGoogleRegister.addEventListener("click", async () => {
      try {
        const result = await signInWithPopup(auth, provider);

        await saveUserProfile(result.user.uid, {
          email: result.user.email || "",
          nombre: result.user.displayName || ""
        });

        showOk("‚úÖ Registrado con Google: " + (result.user.email || ""));
        setTimeout(() => window.showHome?.(), 1200);
      } catch (e) {
        showError(e?.message || String(e));
      }
    });
  </script>
</body>
</html>
























